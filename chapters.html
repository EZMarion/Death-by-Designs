<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Death by Designs</title>
  <link rel="icon" href="favicon.jpg" type="image/jpg">
  <link rel="stylesheet" href="style.css">
  <style>
  body.light-mode {
    background-color: #ffffff;
    color: #000000;
  }
</style>
<script>
  window.onload = function() {
    if (localStorage.getItem("theme") === "light") {
      document.body.classList.add("light-mode");
    }
  };
  function toggleTheme() {
    document.body.classList.toggle("light-mode");
    if (document.body.classList.contains("light-mode")) {
      localStorage.setItem("theme", "light");
    } else {
      localStorage.setItem("theme", "dark");
    }
  }
</script>
</head>
  <script>
  function openModal(id) {
    document.getElementById(id).style.display = 'block';
  }
  function closeModal(id) {
    document.getElementById(id).style.display = 'none';
  }
</script>
  <div id="cookie-popup" style="position: fixed; bottom: 20px; left: 20px; right: 20px; background: #1f3d7a; color: #f0f0f0; padding: 15px; border-radius: 8px; font-family: Georgia, serif; display: none; z-index: 9999;">
  This website uses cookies to improve your experience. By continuing, you agree to our <a href="privacy.html" style="color: #FFD700;">Privacy Policy</a>.
  <button id="accept-cookie" style="margin-left: 15px; padding: 8px 14px; background: #FFD700; color: #1f3d7a; border: none; border-radius: 5px; font-weight: bold; cursor: pointer;">Accept</button>
</div>
  <script>
  window.onload = function() {
    if (!localStorage.getItem("cookiesAccepted")) {
      document.getElementById("cookie-popup").style.display = "block";
    }

    document.getElementById("accept-cookie").onclick = function() {
      localStorage.setItem("cookiesAccepted", true);
      document.getElementById("cookie-popup").style.display = "none";
    }
  }
</script>
<body>
    <button onclick="toggleTheme()" style="position: absolute; top: 20px; right: 20px; padding: 10px 14px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold;">
  üåô / ‚òÄÔ∏è
</button>
<div id="profile-icon" class="profile-icon" style="
  position: absolute;
  top: 20px;
  right: 70px;
  background-color: #333;
  color: #fff;
  font-weight: bold;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: none;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 20px;
"></div>
  
 <div class="user-buttons">
 <button onclick="openModal('loginModal')" class="user-btn">Log In</button>
<button onclick="openModal('signupModal')" class="user-btn">Sign Up</button>
</div>
   <div id="loginModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('loginModal')">&times;</span>
    <h2>Log In</h2>
    <input type="email" id="login-email" placeholder="Email">
    <input type="password" id="login-password" placeholder="Password">
    <button onclick="login()">Login</button> 
  </div>
</div>
<div id="signupModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('signupModal')">&times;</span>
    <h2>Sign Up</h2>
    <input type="text" id="signup-name" placeholder="Name"> <!-- optional -->
    <input type="email" id="signup-email" placeholder="Email">
    <input type="password" id="signup-password" placeholder="Password">
    <button onclick="signup()">Sign Up</button>
  </div>
</div>
     <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
   <script src="auth.js"></script>
<script>
  function signup() {
    const email = document.getElementById("signup-email").value;
    const password = document.getElementById("signup-password").value;

    auth.createUserWithEmailAndPassword(email, password)
      .then(() => {
        alert("Signup successful!");
        closeModal('signupModal');
      })
      .catch(error => alert(error.message));
  }

  function login() {
    const email = document.getElementById("login-email").value;
    const password = document.getElementById("login-password").value;

    auth.signInWithEmailAndPassword(email, password)
      .then(() => {
        alert("Login successful!");
        closeModal('loginModal');
        window.location.href = "index.html"; // Or dashboard.html
      })
      .catch(error => alert(error.message));
  }

    function closeModal(modalId) {
    document.getElementById(modalId).style.display = "none";
  }

  function openModal(modalId) {
    document.getElementById(modalId).style.display = "block";
  }
</script>

   <script>
  function buyChapter(chapterId) {
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        savePurchase(user.uid, chapterId);
      } else {
        alert("You must log in to buy.");
      }
    });
  }
</script>


  <div class="banner">
    <img src="banner.jpg" alt="Banner">
  </div>

 <div style="height: 5px;"></div>
  
  <div class="container">
  <div class="book-layout">
   <img src="Book-Cover.jpg" alt="Book Cover" class="book-cover">
<img src="Small-Cover.jpg" alt="Small Cover" class="small-cover">
    <div class="book-text">
      <h1>Death by Designs</h1>
      <p>by E. Z. Marion</p>
      <a href="index.html" class="btn">Back to Homepage</a>
    
      <p class="reader-note">
        <span style="color: #4da6ff; font-weight: bold;">
  Note: Please sign up first before paying for the chapter.<br>
  That way, you won't need to purchase it again the next time you log in.<br>
            </span>
  Here is my Twitter account:
  <a href="https://twitter.com/@EZMarion2" target="_blank" style="color: #4da6ff; text-decoration: none; font-weight: bold;">
    üê¶@EZMarion2
  </a><br>
  I will upload a new chapter every Friday.<br>
  Feel free to share feedback and comment. I'd love to hear from you.</p>
  </div>
       </div>
  </div>

   <div class="chapter-list"> 
  <p>
    <a href="chapter 1.html">
      <span class="chapter-title">Chapter - 1 The Introduction</span>
      <span class="arrow-label">>></span>
       <span class="free-label">#Free</span>
      
    </a>
  </p>
  <p>
    <a href="chapter 2.html">
      <span class="chapter-title">Chapter - 2 The Lost</span>
      <span class="arrow-label">>></span>
       <span class="free-label">#Free</span>
    </a>
  </p>
  <p>
    <a href="#">
      <span class="chapter-title">Chapter - 3 coming soon....</span>
      <span class="arrow-label">>></span>
       <span class="free-label">#Free</span>
    </a>
  </p>
     <p>
    <a href="#">
      <span class="chapter-title">Chapter - 4 coming soon....</span>
      <span class="arrow-label">>></span>
       <span class="free-label">#Free</span>
    </a>
  </p>
        <p>
    <a href="#">
      <span class="chapter-title">Chapter - 5 coming soon....</span>
      <span class="arrow-label">>></span>
       <span class="free-label">#Free</span>
    </a>
  </p>
      <p>
    <a href="chapter 6.html">
      <span class="chapter-title">Chapter - 6 Weavy Revenage</span>
      <span class="arrow-label">>></span>
      <span class="paid-label">$1 üîí</span>
    </a>
  </p>
</div>


  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script>
auth.onAuthStateChanged(user => {
  if (user) {
    const userId = user.uid;
    const database = firebase.database();

    database.ref('users/' + userId).once('value').then(snapshot => {
      const userData = snapshot.val();

      console.log("User data:", userData);
      if (userData && userData.name) {
        const firstLetter = userData.name.charAt(0).toUpperCase();
        const icon = document.getElementById('profile-icon');
        icon.textContent = firstLetter;
        icon.style.display = 'flex';
        icon.onclick = () => {
          window.location.href = 'profile.html';
        };
      }
    });
  }
});
</script>
</body>
</html>
